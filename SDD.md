## 🌐 웹 OS GUI 프로젝트 기획서

### 1. 프로젝트 개요

**프로젝트명**: WebOS GUI (가제)

**목표**: 최신 웹 기술을 사용하여 데스크톱 운영체제(OS)의 핵심적인 GUI(Graphical User Interface) 경험을 웹 브라우저 내에서 구현한다. 사용자는 아이콘을 더블클릭하여 창을 열고, 드래그 앤 드롭으로 아이콘과 창을 조작하며, URL과 연동되는 파일 탐색기 기능을 사용할 수 있다.

---

### 2. 기술 스택 🥞

- **프레임워크**: **Next.js**
  - 파일 시스템 기반의 동적 라우팅 기능을 활용하여 파일 탐색기 경로를 URL과 직관적으로 연동하기 위해 채택.
- **언어**: **TypeScript**
  - 컴포넌트의 props, 상태 등의 타입을 명확히 하여 코드의 안정성과 유지보수성을 향상.
- **상태 관리**: **React Context API** 또는 **Zustand**
  - 열려 있는 창 목록, 각 창의 위치/크기/활성화 상태, 아이콘 위치 등 전역적으로 관리되어야 할 상태를 효율적으로 처리.
- **스타일링**: **Tailwind CSS** 또는 **Styled-components**
  - 컴포넌트 기반 스타일링 및 빠른 UI 개발을 위해 사용.

---

### 3. 필수 요구사항 (Core Features)

#### 3.1. 바탕화면 환경 (Desktop Environment)

- 웹 페이지는 전체 화면을 차지하는 바탕화면 영역을 가진다.
- 바탕화면에는 여러 개의 바로가기 아이콘이 배치될 수 있다.
- 아이콘들은 그리드 시스템에 맞춰 정렬되거나 자유롭게 배치될 수 있어야 한다.

#### 3.2. 창 시스템 (Windowing System) 🖼️

- **창 열기**: 바탕화면의 아이콘을 **더블클릭**하면 해당 콘텐츠를 담은 창이 열린다.
- **창 구성요소**:
  - **헤더(Header)**: 창의 제목과 제어 버튼(닫기, 최소화, 최대화)이 포함된다.
  - **콘텐츠(Content)**: 지정된 웹 페이지나 콘텐츠를 `<iframe>` 또는 컴포넌트를 통해 렌더링한다.
- **창 관리 기능**:
  - **드래그 이동**: 사용자는 창의 헤더를 드래그하여 위치를 옮길 수 있다.
  - **활성화 관리**: 여러 창이 있을 경우, 클릭된 창이 시각적으로 가장 위(최상위 `z-index`)로 올라와 활성화 상태임을 표시한다.
  - **닫기**: 'X' 버튼 클릭 시 해당 창은 화면에서 완전히 닫힌다.
  - **(선택) 리사이징**: 창의 모서리나 테두리를 드래그하여 크기를 조절할 수 있다.

#### 3.3. 아이콘 시스템 (Icon System)

- 아이콘은 이미지와 이름(텍스트)으로 구성된다.
- 각 아이콘은 더블클릭 시 열릴 창의 콘텐츠 정보(예: URL)를 데이터로 가지고 있어야 한다.
- **드래그 앤 드롭**: 사용자는 아이콘을 바탕화면의 다른 위치로 자유롭게 드래그하여 옮길 수 있어야 한다.

#### 3.4. 파일 탐색기 및 URL 라우팅 🧭

- **핵심 기능**: 파일 탐색기 창의 내부 경로와 브라우저의 URL 주소가 실시간으로 동기화되어야 한다.
- **동적 라우팅**: Next.js의 **Catch-all Routes** (`/explorer/[[...path]].js`)를 사용하여 `/explorer/documents/project-a`와 같은 동적인 경로를 처리한다.
- **UI**:
  - 파일 탐색기 창 상단에는 현재 URL과 동기화된 경로(예: `C:\Users\Documents`)가 표시된다.
  - 창 내부에는 해당 경로에 존재하는 가상의 파일 및 폴더 목록이 표시된다.
- **페이지 새로고침 없는 탐색**:
  - 탐색기 내에서 폴더를 클릭(진입)하면, Next.js의 **Shallow Routing** 기능을 사용하여 **페이지 전체를 새로고치지 않고 URL만 변경**한다.
  - 이를 통해 다른 열려있는 창들의 상태를 그대로 유지하면서 탐색기 내용만 업데이트하는 부드러운 사용자 경험을 제공한다.

---

### 4. 개발 아키텍처 및 전략

1.  **컴포넌트 구조 설계**:

    - `Desktop`: 아이콘과 창들을 포함하는 최상위 컨테이너.
    - `Icon`: 개별 아이콘의 렌더링과 드래그 로직 담당.
    - `Window`: 창의 기본 프레임(헤더, 버튼) 및 드래그, 리사이즈 로직 담당.
    - `WindowManager`: 모든 창의 상태(위치, 크기, z-index 등)를 관리하는 전역 상태 관리 로직.
    - `FileExplorer`: 파일 탐색기 UI와 Next.js 라우터 연동 로직 담당.

2.  **전역 상태 설계**:

    - `windows`: 현재 열려있는 창의 배열. 각 요소는 `{ id, title, position, size, zIndex, contentUrl }`과 같은 정보를 포함.
    - `icons`: 바탕화면 아이콘의 배열. 각 요소는 `{ id, name, position, iconImage }`와 같은 정보를 포함.
    - `activeWindowId`: 현재 활성화된 창의 `id`.

3.  **구현 순서**:
    1.  Next.js + TypeScript 프로젝트 초기 설정.
    2.  정적인 바탕화면 및 아이콘 UI 구현.
    3.  아이콘 드래그 앤 드롭 기능 구현.
    4.  아이콘 더블클릭 시 정적인 `Window` 컴포넌트 생성 기능 구현.
    5.  `Window` 컴포넌트 드래그 및 z-index 관리 기능 구현.
    6.  Next.js 동적 라우팅을 사용한 `FileExplorer` 컴포넌트 기본 연동.
    7.  `FileExplorer` 내 탐색 시 Shallow Routing을 이용한 비동기 업데이트 기능 구현.

---

### 5. 향후 확장 계획 (Future Enhancements)

- **컨텍스트 메뉴**: 바탕화면이나 아이콘에서 오른쪽 클릭 시 메뉴(예: 새로 만들기, 속성) 표시.
- **작업 표시줄 (Taskbar)**: 화면 하단에 현재 실행 중인(열려있는) 창 목록을 표시하고 관리.
- **상태 저장**: `localStorage`를 사용하여 아이콘의 위치나 마지막으로 열었던 창의 상태를 저장하고, 재방문 시 복원.
- **API 연동**: Next.js의 API Routes를 활용하여 실제 파일/폴더 데이터를 동적으로 불러오는 기능 구현.
